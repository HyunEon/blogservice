<!DOCTYPE html>
<!-- static íŒŒì¼ì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜´ -->
<!-- todo: í¬ìŠ¤íŠ¸ ë·° í˜ì´ì§€ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ì—¬ì£¼ëŠ” í˜•íƒœê°€ ì•„ë‹Œ ë©”ì¸ í˜ì´ì§€ì—ì„œ í¬ìŠ¤íŠ¸ë¥¼ í´ë¦­ ì‹œ í¬ìŠ¤íŠ¸ë£° ë¡œë“œí•˜ë„ë¡ ë¶„ë¦¬ -->
<!-- div id = ì´ í˜ì´ì§€ì—ì„œ í•œ ë²ˆë§Œ ì‚¬ìš© ê°€ëŠ¥, div class= ì¬ì‚¬ìš© ê°€ëŠ¥-->
{% load static %} 
<html>
<head>
    <title>í¬ìŠ¤íŠ¸ ìì„¸íˆ ë³´ê¸°</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/postdetail.css' %}">
    <link rel="stylesheet" href="{% static 'css/postcomment.css' %}">
</head>
<body>
    <header>
        <div class="header_title">
            <a class= "blog-title-header" name="blog-title" href="{% url 'post_list' %}">ë¸”ë¡œê·¸</a>
        </div>
    </header>
    <div id= "postdetail_mainwidget">
        <div id= "postwidget">
            <div id= "postlist">
                <div>
                    <h3>{{ category.category_name }}</h3>
                    <posttitle>
                        <p>{{ post.post_title }}</p>
                    </posttitle>
                    <div class="updatedeletebtn_widget">
                        <p style="margin-right:auto">{{ post.post_date }}</p>
                        <div>
                            <button name="editbutton" type="button" onclick="window.location.replace('{% url 'edit_post' post.post_id %}')">âœï¸ ìˆ˜ì •</button>
                        </div>
                        <div style="padding-left: 0.5%">
                            <form method="post" action="{% url 'delete_post' post.post_id %}" onsubmit="return confirmDelete()">
                                {% csrf_token %}
                                <button type="submit" name="deletebutton">âŒ ì‚­ì œ</button>
                            </form>
                        </div>                        
                    </div>
                    <hr>
                </div>
                <div>
                    {{ post.post_contents | safe}}
                </div>
            </div>
        </div>
        <div class="postcommentwidget">
            <h2 style = "padding-left: 3%">ëŒ“ê¸€</h2>
            {% for comment in comments%}
            <div class="postcommentlist">
                {% if comment.comment_isreply %}
                <div class="postcommentlist_depth">
                    â†˜ï¸ <span>{{ comment.comment_editor_uid }}</span>
                    &nbsp; : &nbsp;
                    <span>{{ comment.comment_contents }}</span>
                    {% if not comment.comment_isdelete %}
                        <span class = "comment_replytext" onclick="activateReplyWidget(event)">ë‹µê¸€</span>
                    {% endif %}
                    </div>
                    {% if not comment.comment_isdelete %}
                    <div class="commentmenu_bar">
                        <span class = "comment_editicon">âœï¸</span>
                        <form action ="{% url 'deletecomment' post.post_id comment.comment_id %}" onsubmit="return confirmDelete()" method="post">
                            {% csrf_token %}
                            <button type="submit" class="comment_deleteicon" style="background: none; border: none; color: inherit; cursor: pointer;">ğŸ—‘ï¸</button>
                        </form>
                    </div>
                    {% endif %}
                {% else %}
                <div class="postcomment_normal">
                    <span>{{ comment.comment_editor_uid }}</span>
                    &nbsp;:&nbsp;
                    <span>{{ comment.comment_contents }}</span>
                    {% if not comment.comment_isdelete %}
                        <span class = "comment_replytext" onclick="activateReplyWidget(event)">ë‹µê¸€</span>
                    {% endif %}
                </div>
                    {% if not comment.comment_isdelete %}
                <div class="commentmenu_bar">
                    <span class = "comment_editicon">âœï¸</span>
                    <form action ="{% url 'deletecomment' post.post_id comment.comment_id %}" onsubmit="return confirmDelete()" method="post">
                        {% csrf_token %}
                        <button type="submit" class="comment_deleteicon" style="background: none; border: none; color: inherit; cursor: pointer;">ğŸ—‘ï¸</button>
                    </form>
                </div>
                    {% endif %}
                {% endif %}
            </div>
            {% endfor %}
            <div class="postcommentinput">
                <!-- ì•„ë‹›! ë³´í†µ ë²„íŠ¼ì— ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì„ ë„£ì—ˆëŠ”ë° í¼ì—ë„ ë„£ì„ ìˆ˜ ìˆì—ˆë‹¤ -->
                <form action="{% url 'createcomment' post.post_id %}" name="createcommentform" class="postcommentinputwidget" method="post" onsubmit="return validationcomment('normal')">
                    {% csrf_token %}
                    <textarea class= "postcommenttextarea" name="comment_contents" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
                    <button type="submit" name="commentapplybutton">ì‘ì„±</button>
                </form>
            </div>
            <div class="postreplytinput" style="display: none;">
                <form action="{% url 'createreplycomment' post.post_id 0 %}" name="createreplycommentform" class="postcommentinputwidget" method="post" onsubmit="return validationcomment('reply')">
                    {% csrf_token %}
                    <textarea class= "postcommentreplytextarea" name="comment_contents" placeholder="ë‹µê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
                    <button type="submit" name="commentreplyapplybutton">ì‘ì„±</button>
                </form>
            </div>
        </div>
    </div>
    <script src="{% static 'js/postdetail.js' %}" type="text/javascript">
    </script>
    <footer>
        <div>
            í‘¸í„°
        </div>
    </footer>
</body>
</html>
